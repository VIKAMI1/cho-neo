(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6223),s=n(2023),l=n(3287),a=n(6240);function r(){let e=(0,s.U)(),t=(0,a.useRouter)(),[n,r]=(0,l.useState)("request"),[c,o]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[d,h]=(0,l.useState)(!1),[x,b]=(0,l.useState)(null),p=(0,l.useMemo)(()=>c.trim().toLowerCase(),[c]),g=async()=>{if(b(null),!p)return b("Nhập email trước nha.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p))return b("Email n\xe0y nh\xecn chưa đ\xfang. Kiểm tra lại gi\xfap m\xecnh nha.");try{h(!0);let{error:t}=await e.auth.signInWithOtp({email:p,options:{shouldCreateUser:!1}});if(t)return b(t.message);r("verify"),b("Đ\xe3 gửi m\xe3 đăng nhập. Mở email lấy code rồi nhập v\xe0o đ\xe2y nha.")}finally{h(!1)}},f=async()=>{b(null);let n=m.trim();if(!n)return b("Nhập m\xe3 code trước nha.");try{h(!0);let{error:i}=await e.auth.verifyOtp({email:p,token:n,type:"email"});if(i)return b(i.message);t.replace("/")}finally{h(!1)}};return(0,i.jsx)("main",{className:"min-h-screen bg-[#fbf7ef] text-zinc-900",children:(0,i.jsx)("div",{className:"mx-auto max-w-sm px-4 py-12",children:(0,i.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white/85 shadow-sm p-6",children:[(0,i.jsx)("h1",{className:"text-xl font-semibold",children:"Sign in"}),(0,i.jsx)("p",{className:"text-sm text-zinc-600 mt-1",children:"Đăng nhập bằng email + m\xe3 code. Kh\xf4ng cần link, kh\xf4ng cần mật khẩu."}),(0,i.jsx)("label",{className:"block mt-5 text-sm font-medium text-zinc-700",children:"Email"}),(0,i.jsx)("input",{className:"mt-2 w-full rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-200",placeholder:"you@example.com",value:c,onChange:e=>o(e.target.value),autoComplete:"email",inputMode:"email",disabled:"verify"===n}),"request"===n?(0,i.jsx)("button",{className:"mt-4 w-full rounded-xl px-4 py-3 text-sm font-semibold bg-zinc-900 text-white hover:bg-zinc-800 disabled:opacity-60",onClick:g,disabled:d,children:d?"Đang gửi…":"Send code"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{className:"block mt-4 text-sm font-medium text-zinc-700",children:"M\xe3 code"}),(0,i.jsx)("input",{className:"mt-2 w-full rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-200",placeholder:"Nhập code trong email",value:m,onChange:e=>u(e.target.value),inputMode:"numeric"}),(0,i.jsx)("button",{className:"mt-4 w-full rounded-xl px-4 py-3 text-sm font-semibold bg-zinc-900 text-white hover:bg-zinc-800 disabled:opacity-60",onClick:f,disabled:d,children:d?"Đang x\xe1c nhận…":"Verify & Sign in"}),(0,i.jsx)("button",{className:"mt-3 w-full rounded-xl px-4 py-3 text-sm border border-zinc-200 bg-white hover:bg-zinc-50",onClick:()=>{r("request"),u(""),b(null)},disabled:d,children:"Gửi lại code"})]}),x&&(0,i.jsx)("div",{className:"mt-4 rounded-xl border border-zinc-200 bg-[#fffdf8] p-3",children:(0,i.jsx)("p",{className:"text-sm text-zinc-700",children:x})}),(0,i.jsx)("p",{className:"mt-5 text-xs text-zinc-500",children:"Tip: Nếu kh\xf4ng thấy email, coi Spam/Promotions. Đừng bấm gửi li\xean tục (Supabase sẽ rate-limit)."})]})})})}},2023:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var i=n(7620);function s(){return(0,i.UU)("https://xqabvmiljboliyzxczkw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhxYWJ2bWlsamJvbGl5enhjemt3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNjI1OTksImV4cCI6MjA3OTkzODU5OX0.LAZTX2bgdEpqOXOKu1lSzjnWRxvakBeOrJeUFV8M-s0")}},3046:(e,t,n)=>{Promise.resolve().then(n.bind(n,1977))},6240:(e,t,n)=>{"use strict";var i=n(9776);n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}})}},e=>{e.O(0,[620,483,933,358],()=>e(e.s=3046)),_N_E=e.O()}]);