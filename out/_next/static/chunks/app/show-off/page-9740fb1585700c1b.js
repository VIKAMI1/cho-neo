(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{229:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(6223),i=t(982);function l(){return(0,a.jsx)(i.A,{})}},982:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(6223),i=t(3287),l=t(7620);function r(){let e=(0,i.useMemo)(()=>(0,l.UU)("https://xqabvmiljboliyzxczkw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhxYWJ2bWlsamJvbGl5enhjemt3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNjI1OTksImV4cCI6MjA3OTkzODU5OX0.LAZTX2bgdEpqOXOKu1lSzjnWRxvakBeOrJeUFV8M-s0"),[]),[s,t]=(0,i.useState)([]),[r,n]=(0,i.useState)(null);async function d(){let{data:s,error:a}=await e.from("showoff_feed").select("*").order("created_at",{ascending:!1}).limit(30);if(a)throw a;t(null!=s?s:[])}async function c(s,t){n(null);try{let{data:a}=await e.auth.getUser();if(!a.user)throw Error("Sign in to react.");let i=a.user.id;if((await e.from("showoff_reactions").insert([{post_id:s,user_id:i,emoji:t}])).error){let a=await e.from("showoff_reactions").delete().eq("post_id",s).eq("user_id",i).eq("emoji",t);if(a.error)throw a.error}await d()}catch(e){var a;n(null!=(a=null==e?void 0:e.message)?a:"Reaction failed.")}}return(0,i.useEffect)(()=>{d().catch(e=>{var s;return n(null!=(s=null==e?void 0:e.message)?s:"Failed to load.")})},[]),(0,a.jsxs)("div",{className:"mx-auto max-w-3xl p-4",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-end justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Show-Off"}),(0,a.jsx)("p",{className:"text-sm opacity-80",children:"Reactions only. Keep it clean."})]}),(0,a.jsx)("a",{className:"rounded-xl border px-4 py-2 text-sm shadow-sm",href:"/show-off/new",children:"New Post"})]}),r&&(0,a.jsx)("div",{className:"mb-4 rounded-xl border border-red-300 bg-red-50 p-3 text-sm",children:r}),(0,a.jsx)("div",{className:"space-y-4",children:0===s.length?(0,a.jsx)("div",{className:"rounded-2xl border p-6 text-sm opacity-80",children:"No Show-Off posts yet."}):s.map(e=>{var s,t,i,l;return(0,a.jsxs)("div",{className:"rounded-2xl border p-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"text-xs opacity-70",children:new Date(e.created_at).toLocaleString()}),(0,a.jsxs)("div",{className:"text-xs opacity-70",children:["expires ",new Date(e.expires_at).toLocaleDateString()]})]}),(null==(s=e.media)?void 0:s.length)>0&&(0,a.jsx)("div",{className:"mt-3 grid grid-cols-3 gap-2",children:e.media.slice(0,3).map(e=>(0,a.jsx)("div",{className:"relative aspect-square overflow-hidden rounded-xl border",children:(0,a.jsx)("img",{src:e.url,alt:"showoff",className:"h-full w-full object-cover"})},e.id))}),e.caption&&(0,a.jsx)("div",{className:"mt-3 text-sm",children:e.caption}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[(0,a.jsxs)("button",{onClick:()=>c(e.id,"\uD83D\uDD25"),className:"rounded-xl border px-3 py-1",children:["\uD83D\uDD25 ",null!=(t=e.fire_count)?t:0]}),(0,a.jsxs)("button",{onClick:()=>c(e.id,"\uD83D\uDC85"),className:"rounded-xl border px-3 py-1",children:["\uD83D\uDC85 ",null!=(i=e.nail_count)?i:0]}),(0,a.jsxs)("button",{onClick:()=>c(e.id,"\uD83D\uDC40"),className:"rounded-xl border px-3 py-1",children:["\uD83D\uDC40 ",null!=(l=e.eyes_count)?l:0]})]})]},e.id)})})]})}},8304:(e,s,t)=>{Promise.resolve().then(t.bind(t,229))}},e=>{e.O(0,[620,483,933,358],()=>e(e.s=8304)),_N_E=e.O()}]);