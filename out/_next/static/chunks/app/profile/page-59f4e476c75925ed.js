(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1345:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var l=s(6223),t=s(3287),i=s(2023),n=s(9119),r=s.n(n);let c=(0,i.U)();function m(){let[e,a]=(0,t.useState)(null),[s,i]=(0,t.useState)(""),[n,m]=(0,t.useState)("tech"),[d,u]=(0,t.useState)(""),[o,x]=(0,t.useState)(!0),[h,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=!0;return async function(){var s;let{data:l}=await c.auth.getUser();if(!e)return;let t=l.user;if(!t){a(null),x(!1);return}a(null!=(s=t.email)?s:null);let{data:n}=await c.from("profiles").select("*").eq("id",t.id).maybeSingle();n&&(i(n.display_name||""),m(n.role||"tech"),u(n.salon_name||"")),x(!1)}(),()=>{e=!1}},[]);let b=async e=>{if(e.preventDefault(),!s.trim())return void alert("Display name is required");let{data:a,error:l}=await c.auth.getUser();if(l||!a.user)return void alert("Not signed in");p(!0);let t={id:a.user.id,display_name:s.trim(),role:n,salon_name:d.trim()||null},{error:i}=await c.from("profiles").upsert(t);if(p(!1),i)return void alert(i.message);alert("Profile saved")};return o?(0,l.jsx)("main",{className:"max-w-md mx-auto p-6",children:"Loading…"}):e?(0,l.jsxs)("main",{className:"max-w-md mx-auto p-6 space-y-4",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Your Profile"}),(0,l.jsx)(r(),{className:"underline text-sm",href:"/",children:"Back to Chợ"})]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Signed in as ",e]}),(0,l.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:"Display name"}),(0,l.jsx)("input",{className:"border p-2 w-full text-sm",value:s,onChange:e=>i(e.target.value),placeholder:"V\xed dụ: B\xe9 Na, C\xf4 S\xe1u Nails..."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:"Role"}),(0,l.jsx)("div",{className:"flex gap-3 text-sm",children:["tech","owner","lurker"].map(e=>(0,l.jsxs)("label",{className:"flex items-center gap-1",children:[(0,l.jsx)("input",{type:"radio",value:e,checked:n===e,onChange:()=>m(e)}),(0,l.jsx)("span",{children:"tech"===e?"Nail tech":"owner"===e?"Salon owner":"Just watching"})]},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:"Salon name (optional)"}),(0,l.jsx)("input",{className:"border p-2 w-full text-sm",value:d,onChange:e=>u(e.target.value),placeholder:"Paradize Nails, Tiệm Nh\xe0 Em..."})]}),(0,l.jsx)("button",{type:"submit",disabled:h,className:"border px-4 py-2 text-sm",children:h?"Saving…":"Save profile"})]})]}):(0,l.jsxs)("main",{className:"max-w-md mx-auto p-6 space-y-4",children:[(0,l.jsx)("p",{children:"You are not signed in."}),(0,l.jsx)(r(),{className:"underline text-sm",href:"/login",children:"Go to login"})]})}},2023:(e,a,s)=>{"use strict";s.d(a,{U:()=>t});var l=s(7620);function t(){return(0,l.UU)("https://xqabvmiljboliyzxczkw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhxYWJ2bWlsamJvbGl5enhjemt3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNjI1OTksImV4cCI6MjA3OTkzODU5OX0.LAZTX2bgdEpqOXOKu1lSzjnWRxvakBeOrJeUFV8M-s0")}},6154:(e,a,s)=>{Promise.resolve().then(s.bind(s,1345))}},e=>{e.O(0,[620,119,483,933,358],()=>e(e.s=6154)),_N_E=e.O()}]);